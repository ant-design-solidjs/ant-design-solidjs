"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const A=require("./canUseDom.js"),N=require("./contains.js"),p="data-rc-order",y="data-rc-priority",P="rc-util-key",l=new Map;function g({mark:e}={}){return e?e.startsWith("data-")?e:`data-${e}`:P}function f(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function T(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function S(e){return Array.from((l.get(e)||e).children).filter(t=>t.tagName==="STYLE")}function h(e,t={}){if(!A.canUseDom())return null;const{csp:n,prepend:c,priority:s=0}=t,o=T(c),i=o==="prependQueue",r=document.createElement("style");r.setAttribute(p,o),i&&s&&r.setAttribute(y,`${s}`),n!=null&&n.nonce&&(r.nonce=n==null?void 0:n.nonce),r.innerHTML=e;const u=f(t),{firstChild:d}=u;if(c){if(i){const a=(t.styles||S(u)).filter(C=>{if(!["prepend","prependQueue"].includes(C.getAttribute(p)))return!1;const b=Number(C.getAttribute(y)||0);return s>=b});if(a.length)return u.insertBefore(r,a[a.length-1].nextSibling),r}u.insertBefore(r,d)}else u.appendChild(r);return r}function m(e,t={}){let{styles:n}=t;return n||(n=S(f(t))),n.find(c=>c.getAttribute(g(t))===e)}function E(e,t={}){const n=m(e,t);n&&f(t).removeChild(n)}function M(e,t){const n=l.get(e);if(!n||!N.contains(document,n)){const c=h("",t),{parentNode:s}=c;l.set(e,s),e.removeChild(c)}}function R(){l.clear()}function v(e,t,n={}){var u,d,a;const c=f(n),s=S(c),o={...n,styles:s};M(c,o);const i=m(t,o);if(i)return(u=o.csp)!=null&&u.nonce&&i.nonce!==((d=o.csp)==null?void 0:d.nonce)&&(i.nonce=(a=o.csp)==null?void 0:a.nonce),i.innerHTML!==e&&(i.innerHTML=e),i;const r=h(e,o);return r.setAttribute(g(o),t),r}exports.clearContainerCache=R;exports.injectCSS=h;exports.removeCSS=E;exports.updateCSS=v;
